(function()
    -- â‘  å¼ºåˆ¶ 200Ã—200 å±…ä¸­çª—å£
    getgenv().WindowSize = UDim2.new(0, 200, 0, 200)
    
    -- é»‘è‰² OrionLib UIï¼ˆå¤å¤å¤§å¸ä¸“ç‰ˆ + é”å®šç§»é€Ÿè·³è·ƒ + å¢å¼ºç©å®¶ ESP + NPC é€è§†ï¼‰
    local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/wsomoQaz/lua-/main/Xcccc"))()
    
    -- çº¯é»‘ä¸»é¢˜
    OrionLib.Themes.Default = {
        Main    = Color3.fromRGB(20,20,20),
        Second  = Color3.fromRGB(30,30,30),
        Stroke  = Color3.fromRGB(50,50,50),
        Divider = Color3.fromRGB(40,40,40),
        Text    = Color3.fromRGB(255,255,255),
        TextDark= Color3.fromRGB(200,200,200)
    }
    OrionLib.SelectedTheme = "Default"
    
    -- ä¸»çª—å£
    local Window = OrionLib:MakeWindow({
        IntroText = "å¤å¤å¤§å¸è„šæœ¬",
        Name = "å¤å¤å¤§å¸è„šæœ¬ - " .. identifyexecutor(),
        HidePremium = false,
        SaveConfig = true,
        ConfigFolder = "StitchConfig"
    })
    
    -- å…¬å‘Š Tab
    local Tab1 = Window:MakeTab({Name = "å…¬å‘Š", Icon = "rbxassetid://7733779610"})
    local function getDate() return os.date("%Y-%m-%d %H:%M") end
    local function getPlayer()
        local p = game.Players.LocalPlayer
        return {
            ["ç”¨æˆ·å"]   = p.Name,
            ["æ˜¾ç¤ºå"]   = p.DisplayName,
            ["ç”¨æˆ·ID"]   = p.UserId,
            ["æ³¨å†Œå¤©æ•°"] = p.AccountAge,
            ["å½“å‰æ¸¸æˆ"] = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
        }
    end
    Tab1:AddLabel("ğŸ“… å½“å‰æ—¶é—´")
    Tab1:AddLabel(getDate())
    for k, v in pairs(getPlayer()) do
        Tab1:AddLabel(k .. "ï¼š " .. tostring(v))
    end
    Tab1:AddButton({Name = "æ‰“å° QQå·", Callback = function() print("913348285") end})
    
    -- ç¡®ä¿ä½ å‰é¢æœ‰è¿™è¡Œï¼ˆæ”¾åœ¨ OrionLib åˆå§‹åŒ–åï¼‰
    local Tab4 = Window:MakeTab({Name = "äººç‰©åŠŸèƒ½", Icon = "rbxassetid://7733779610"})
    
    -- å…¼å®¹ executor æ²¡æœ‰ mouse1press / mouse1release
    local mouse1press  = mouse1press  or function()
        local vim = game:GetService("VirtualInputManager")
        vim:SendMouseButtonEvent(0,0,0,true,game,1)
    end
    local mouse1release = mouse1release or function()
        local vim = game:GetService("VirtualInputManager")
        vim:SendMouseButtonEvent(0,0,0,false,game,1)
    end
    
    -----------------------------------------------------------------
    -- â‘¤ åŒç‹¬ç«‹ FOVï¼ˆç™½è·Ÿéš + æ©™å›ºå®šï¼‰éƒ½å‚ä¸ç„å‡†åˆ¤å®š
    -----------------------------------------------------------------
    -- é€šç”¨å‚æ•°
    local aimbotEnabled      = false
    local aimbotSmooth       = 0.35
    local aimbotBone         = "Head"
    local aimbotPrediction   = 0.12
    local aimbotDelay        = 0.08
    local aimbotCheckTeam    = true
    local lastFire = 0
    local aimbotConn
    
    -- ç¼ºå¤±å˜é‡ä¸€æ¬¡æ€§è¡¥å…¨
    local Camera = workspace.CurrentCamera
    local UserInputService = game:GetService("UserInputService")
    
    -- 1. è·Ÿéšé¼ æ ‡ FOV
    local mouseFOV      = 120
    local mouseFovCircle = Drawing.new("Circle")
    mouseFovCircle.NumSides  = 64
    mouseFovCircle.Radius    = mouseFOV
    mouseFovCircle.Thickness = 1.5
    mouseFovCircle.Color     = Color3.fromRGB(255,255,255)
    mouseFovCircle.Filled    = false
    mouseFovCircle.Visible   = false
    
    -- 2. å›ºå®šä¸­å¿ƒ FOV
    local fixedFOV      = 90
    local fixedFovCircle = Drawing.new("Circle")
    fixedFovCircle.NumSides  = 64
    fixedFovCircle.Radius    = fixedFOV
    fixedFovCircle.Thickness = 1.5
    fixedFovCircle.Color     = Color3.fromRGB(255,165,0)
    fixedFovCircle.Filled    = false
    fixedFovCircle.Visible   = false
    
    -- å›ºå®šåœ†ä¸­å¿ƒä¸€æ¬¡è®¾ç½®
    local function setFixedCenter()
        local center = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
        fixedFovCircle.Position = center
    end
    Camera:GetPropertyChangedSignal("ViewportSize"):Connect(setFixedCenter)
    setFixedCenter()
    
    -- å·¥å…·å‡½æ•°
    local function getAimPos(character)
        if not character then return nil end
        local root = character:FindFirstChild("HumanoidRootPart")
        local bone = character:FindFirstChild(aimbotBone) or character:FindFirstChild("Head")
        if not (root and bone) then return nil end
        local vel = root.Velocity.Magnitude < 1 and Vector3.new(0,0,0) or root.Velocity
        return bone.Position + vel * aimbotPrediction
    end
    
    local function isVisible(pos, ignore)
        local ray = Ray.new(Camera.CFrame.Position, (pos - Camera.CFrame.Position).Unit * 5000)
        local part = workspace:FindPartOnRayWithIgnoreList(ray, ignore or {})
        return not part or part:IsDescendantOf(game.Players.LocalPlayer.Character)
    end
    
    -- åˆ¤å®šæ˜¯å¦åœ¨ä»»ä¸€ FOV
    local function inAnyFOV(worldPos)
        -- è·Ÿéšåœ†
        if mouseFovCircle.Visible then
            local sp = Camera:WorldToViewportPoint(worldPos)
            local m  = UserInputService:GetMouseLocation()
            if (Vector2.new(sp.X, sp.Y) - m).Magnitude <= mouseFOV then
                return true
            end
        end
        -- å›ºå®šåœ†
        if fixedFovCircle.Visible then
            local sp = Camera:WorldToViewportPoint(worldPos)
            local c  = fixedFovCircle.Position
            if (Vector2.new(sp.X, sp.Y) - c).Magnitude <= fixedFOV then
                return true
            end
        end
        return false
    end
    
    -- å–æœ€è¿‘ç›®æ ‡ï¼ˆä»¥å›ºå®šä¸­å¿ƒä¸ºåŸºå‡†ï¼‰
    local function getClosest()
        local closest, minDist = nil, math.huge
        local center = fixedFovCircle.Position
        for _, plr in ipairs(game.Players:GetPlayers()) do
            if plr == game.Players.LocalPlayer then continue end
            if aimbotCheckTeam and plr.Team and plr.Team == game.Players.LocalPlayer.Team then continue end
            local char = plr.Character
            local aimPos = getAimPos(char)
            if not aimPos then continue end
            if not inAnyFOV(aimPos) then continue end
            if not isVisible(aimPos, {game.Players.LocalPlayer.Character}) then continue end
            local sp = Camera:WorldToViewportPoint(aimPos)
            local dist = (Vector2.new(sp.X, sp.Y) - center).Magnitude
            if dist < minDist then
                minDist, closest = dist, plr
            end
        end
        return closest
    end
    
    -- ä¸»å¾ªç¯ï¼ˆå¸¦é˜²ç¬ç”©ï¼‰
    local function startAimbot()
        if aimbotConn then return end
        aimbotConn = game:GetService("RunService").RenderStepped:Connect(function()
            if not aimbotEnabled then return end
            -- æ›´æ–°è·Ÿéšåœ†
            mouseFovCircle.Position = UserInputService:GetMouseLocation()
    
            local target = getClosest()
            if not target then return end
            local aimPos = getAimPos(target.Character)
            if not aimPos then return end
    
            -- å®‰å…¨ + è§’åº¦é™åˆ¶
            local delta = aimPos - Camera.CFrame.Position
            if delta.Magnitude < 0.1 then return end
            local targetCF = CFrame.new(Camera.CFrame.Position, Camera.CFrame.Position + delta.Unit)
            local maxAngle = math.rad(90)
            local angle = math.acos(math.clamp(Camera.CFrame.LookVector:Dot(targetCF.LookVector), -1, 1))
            if angle <= maxAngle then
                Camera.CFrame = Camera.CFrame:Lerp(targetCF, 1 - math.clamp(aimbotSmooth, 0.01, 0.99))
            end
    
            if tick() - lastFire > aimbotDelay then
                mouse1press(); task.wait(); mouse1release()
                lastFire = tick()
            end
        end)
    end
    
    local function stopAimbot()
        if aimbotConn then aimbotConn:Disconnect(); aimbotConn = nil end
        mouseFovCircle.Visible = false
        fixedFovCircle.Visible = false
    end
    
    -----------------------------------------------------------------
    -- UI æ„å»ºï¼ˆåŸæ ·ä¿ç•™ï¼‰
    -----------------------------------------------------------------
    local aimbotSec = Tab4:AddSection({Name = "AI-Aimbot"})
    aimbotSec:AddToggle({
        Name = "å¯ç”¨ Aimbot",
        Default = false,
        Callback = function(v)
            aimbotEnabled = v
            if v then startAimbot() else stopAimbot() end
        end
    })
    aimbotSec:AddToggle({
        Name = "ä»…ç„å‡†æ•Œäºº",
        Default = aimbotCheckTeam,
        Callback = function(v) aimbotCheckTeam = v end
    })
    
    local mouseSec = Tab4:AddSection({Name = "è·Ÿéšé¼ æ ‡ FOV"})
    local mouseTog = mouseSec:AddToggle({ Name = "æ˜¾ç¤ºè·ŸéšFOV", Default = false, Callback = function(v) mouseFovCircle.Visible = v end })
    local mouseSlider = mouseSec:AddSlider({ Name = "åŠå¾„ï¼ˆæ»‘æ¡ï¼‰", Min = 0, Max = 500, Default = mouseFOV, Increment = 5, Callback = function(v) mouseFOV = v; mouseFovCircle.Radius = v end })
    mouseSec:AddTextbox({ Name = "åŠå¾„ï¼ˆè¾“å…¥ï¼‰", Default = tostring(mouseFOV), Callback = function(txt) local n = tonumber(txt) if n then mouseFOV = n; mouseFovCircle.Radius = n; mouseSlider:Set(n) end end })
    
    local fixedSec = Tab4:AddSection({Name = "å›ºå®šä¸­å¿ƒ FOV"})
    local fixedTog = fixedSec:AddToggle({ Name = "æ˜¾ç¤ºå›ºå®šFOV", Default = false, Callback = function(v) fixedFovCircle.Visible = v end })
    local fixedSlider = fixedSec:AddSlider({ Name = "åŠå¾„ï¼ˆæ»‘æ¡ï¼‰", Min = 0, Max = 500, Default = fixedFOV, Increment = 5, Callback = function(v) fixedFOV = v; fixedFovCircle.Radius = v end })
    fixedSec:AddTextbox({ Name = "åŠå¾„ï¼ˆè¾“å…¥ï¼‰", Default = tostring(fixedFOV), Callback = function(txt) local n = tonumber(txt) if n then fixedFOV = n; fixedFovCircle.Radius = n; fixedSlider:Set(n) end end })
    
    local commonSec = Tab4:AddSection({Name = "é€šç”¨å‚æ•°"})
    local smoothSlider = commonSec:AddSlider({ Name = "å¹³æ»‘ç³»æ•°ï¼ˆæ»‘æ¡ï¼‰", Min = 0, Max = 1, Default = aimbotSmooth, Increment = 0.01, Callback = function(v) aimbotSmooth = v end })
    commonSec:AddTextbox({ Name = "å¹³æ»‘ç³»æ•°ï¼ˆè¾“å…¥ï¼‰", Default = tostring(aimbotSmooth), Callback = function(txt) local n = tonumber(txt) if n then aimbotSmooth = n; smoothSlider:Set(n) end end })
    local predSlider = commonSec:AddSlider({ Name = "é¢„æµ‹ (ç§’)ï¼ˆæ»‘æ¡ï¼‰", Min = 0, Max = 1, Default = aimbotPrediction, Increment = 0.01, Callback = function(v) aimbotPrediction = v end })
    commonSec:AddTextbox({ Name = "é¢„æµ‹ (ç§’)ï¼ˆè¾“å…¥ï¼‰", Default = tostring(aimbotPrediction), Callback = function(txt) local n = tonumber(txt) if n then aimbotPrediction = n; predSlider:Set(n) end end })
    local delaySlider = commonSec:AddSlider({ Name = "å¼€ç«å»¶è¿Ÿ (ç§’)ï¼ˆæ»‘æ¡ï¼‰", Min = 0, Max = 1, Default = aimbotDelay, Increment = 0.01, Callback = function(v) aimbotDelay = v end })
    commonSec:AddTextbox({ Name = "å¼€ç«å»¶è¿Ÿ (ç§’)ï¼ˆè¾“å…¥ï¼‰", Default = tostring(aimbotDelay), Callback = function(txt) local n = tonumber(txt) if n then aimbotDelay = n; delaySlider:Set(n) end end })
    commonSec:AddDropdown({ Name = "ç„å‡†éª¨éª¼", Default = aimbotBone, Options = {"Head","Neck","UpperTorso","HumanoidRootPart"}, Callback = function(v) aimbotBone = v end })
    
    
    -----------------------------------------------------------------
    -- â‘¥ åˆ é™¤é˜´å½±ï¼ˆå…¨å±€å¼€å…³ï¼‰
    -----------------------------------------------------------------
    Tab4:AddToggle({
        Name = "åˆ é™¤é˜´å½±",
        Default = false,
        Callback = function(v)
            game.Lighting.GlobalShadows = not v
            for _, l in ipairs(workspace:GetDescendants()) do
                if l:IsA("BasePart") or l:IsA("MeshPart") then
                    l.CastShadow = not v
                end
            end
            OrionLib:MakeNotification({Name = "æç¤º", Content = v and "é˜´å½±å·²åˆ é™¤" or "é˜´å½±å·²æ¢å¤", Time = 2})
        end
    })
    
    -----------------------------------------------------------------
    -- â‘¦ ç®€å•é£è¡Œï¼ˆç©ºæ ¼ä¸Šå‡ï¼ŒCtrlä¸‹é™ï¼‰
    -----------------------------------------------------------------
    local flyEnabled = false
    local flySpeed = 50
    local flyConn
    local flyRoot
    
    local function startFly()
        if flyConn then return end
        flyRoot = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if not flyRoot then return end
        flyConn = game:GetService("RunService").Heartbeat:Connect(function(dt)
            local vel = Vector3.new()
            if UserInputService:IsKeyDown(Enum.KeyCode.Space) then vel = vel + Vector3.new(0,  flySpeed * dt, 0) end
            if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then vel = vel + Vector3.new(0, -flySpeed * dt, 0) end
            flyRoot.Velocity = vel
        end)
    end
    
    local function stopFly()
        if flyConn then flyConn:Disconnect(); flyConn = nil end
    end
    
    Tab4:AddToggle({Name = "é£è¡Œ", Default = false, Callback = function(v)
        flyEnabled = v
        if v then startFly() else stopFly() end
    end})
    
    -----------------------------------------------------------------
    -- â‘§ å¢å¼ºç‰ˆç©å®¶ ESPï¼ˆå«é˜Ÿä¼æ£€æµ‹ã€è·ç¦»ã€è¡€æ¡å’Œå¯è§æ€§ï¼‰
    -----------------------------------------------------------------
    local espEnabled = false
    local espObjects = {}
    local espCache = {}
    
    -- è·å–é˜Ÿä¼é¢œè‰²
    local function getTeamColor(plr)
        if plr.Team == game.Players.LocalPlayer.Team then
            return Color3.fromRGB(0, 255, 0) -- é˜Ÿå‹ç»¿è‰²
        else
            return Color3.fromRGB(255, 0, 0) -- æ•Œäººçº¢è‰²
        end
    end
    
    -- æ¸…ç†ESPå¯¹è±¡
    local function clearESP()
        for _, obj in pairs(espObjects) do
            if obj then
                pcall(function() obj:Remove() end)
            end
        end
        table.clear(espObjects)
    end
    
    -- åˆ›å»ºESPå¯¹è±¡
    local function createESPObject(plr, char)
        local esp = {
            Box = Drawing.new("Quad"),
            Name = Drawing.new("Text"),
            Distance = Drawing.new("Text"),
            HealthBar = Drawing.new("Quad"),
            HealthText = Drawing.new("Text")
        }
        
        -- è®¾ç½®åˆå§‹å±æ€§
        esp.Box.Thickness = 1.5
        esp.Box.Filled = false
        
        esp.Name.Size = 18
        esp.Name.Center = true
        esp.Name.Outline = true
        
        esp.Distance.Size = 16
        esp.Distance.Center = true
        esp.Distance.Outline = true
        
        esp.HealthBar.Filled = true
        esp.HealthBar.Thickness = 1
        
        esp.HealthText.Size = 14
        esp.HealthText.Center = true
        esp.HealthText.Outline = true
        
        espCache[plr] = esp
        return esp
    end
    
    -- æ›´æ–°ESP
    local function updateESP()
        if not espEnabled then return end
        
        for _, plr in ipairs(game.Players:GetPlayers()) do
            if plr == game.Players.LocalPlayer then continue end
            
            local char = plr.Character
            if not char then
                if espCache[plr] then
                    for _, obj in pairs(espCache[plr]) do
                        obj.Visible = false
                    end
                end
                continue
            end
            
            local root = char:FindFirstChild("HumanoidRootPart")
            local head = char:FindFirstChild("Head")
            local humanoid = char:FindFirstChildOfClass("Humanoid")
            
            if not (root and head and humanoid) then continue end
            
            -- è·å–å±å¹•ä½ç½®
            local rootPos, rootVis = Camera:WorldToViewportPoint(root.Position)
            local headPos, headVis = Camera:WorldToViewportPoint(head.Position + Vector3.new(0, 1.5, 0))
            
            if not (rootVis and headVis) then
                if espCache[plr] then
                    for _, obj in pairs(espCache[plr]) do
                        obj.Visible = false
                    end
                end
                continue
            end
            
            -- åˆ›å»ºæˆ–è·å–ESPå¯¹è±¡
            local esp = espCache[plr] or createESPObject(plr, char)
            
            -- è®¡ç®—å°ºå¯¸
            local height = math.abs(headPos.Y - rootPos.Y) * 1.5
            local width = height * 0.6
            local left = headPos.X - width / 2
            local right = headPos.X + width / 2
            
            -- è®¾ç½®é¢œè‰²
            local color = getTeamColor(plr)
            
            -- æ›´æ–°æ–¹æ¡†
            esp.Box.Visible = true
            esp.Box.Color = color
            esp.Box.PointA = Vector2.new(left, headPos.Y)
            esp.Box.PointB = Vector2.new(right, headPos.Y)
            esp.Box.PointC = Vector2.new(right, headPos.Y + height)
            esp.Box.PointD = Vector2.new(left, headPos.Y + height)
            
            -- æ›´æ–°åå­—
            esp.Name.Visible = true
            esp.Name.Color = color
            esp.Name.Position = Vector2.new(headPos.X, headPos.Y - 20)
            esp.Name.Text = plr.Name
            
            -- æ›´æ–°è·ç¦»
            local distance = math.floor((root.Position - Camera.CFrame.Position).Magnitude)
            esp.Distance.Visible = true
            esp.Distance.Color = color
            esp.Distance.Position = Vector2.new(headPos.X, headPos.Y + height + 5)
            esp.Distance.Text = tostring(distance) .. "m"
            
            -- æ›´æ–°è¡€æ¡
            local healthPercent = math.clamp(humanoid.Health / humanoid.MaxHealth, 0, 1)
            local barWidth = width
            local barHeight = 5
            local barX = left
            local barY = headPos.Y + height + 20
            
            esp.HealthBar.Visible = true
            esp.HealthBar.Color = Color3.new(1 - healthPercent, healthPercent, 0) -- çº¢åˆ°ç»¿æ¸å˜
            esp.HealthBar.PointA = Vector2.new(barX, barY)
            esp.HealthBar.PointB = Vector2.new(barX + barWidth * healthPercent, barY)
            esp.HealthBar.PointC = Vector2.new(barX + barWidth * healthPercent, barY + barHeight)
            esp.HealthBar.PointD = Vector2.new(barX, barY + barHeight)
            
            -- æ›´æ–°è¡€é‡æ–‡æœ¬
            esp.HealthText.Visible = true
            esp.HealthText.Color = Color3.new(1, 1, 1)
            esp.HealthText.Position = Vector2.new(barX + barWidth / 2, barY - 10)
            esp.HealthText.Text = math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)
        end
        
        -- æ¸…ç†ä¸å­˜åœ¨çš„ç©å®¶ESP
        for plr, esp in pairs(espCache) do
            if not plr or not plr.Parent or plr == game.Players.LocalPlayer then
                for _, obj in pairs(esp) do
                    obj.Visible = false
                    obj:Remove()
                end
                espCache[plr] = nil
            end
        end
    end
    
    -- å¯åŠ¨ESPå¾ªç¯
    local espLoop
    Tab4:AddToggle({Name = "å¢å¼ºç©å®¶ ESP", Default = false, Callback = function(v)
        espEnabled = v
        if v then
            if not espLoop then
                espLoop = game:GetService("RunService").RenderStepped:Connect(updateESP)
            end
        else
            if espLoop then
                espLoop:Disconnect()
                espLoop = nil
            end
            clearESP()
            -- æ¸…ç†ç¼“å­˜
            for plr, esp in pairs(espCache) do
                for _, obj in pairs(esp) do
                    pcall(function() obj:Remove() end)
                end
            end
            table.clear(espCache)
        end
    end})
    
    -----------------------------------------------------------------
    -- â‘¨ NPC é€è§†ï¼ˆå¢å¼ºç‰ˆï¼‰
    -----------------------------------------------------------------
    local npcEspEnabled = false
    local npcEspCache = {}
    
    -- åˆ›å»ºNPC ESPå¯¹è±¡
    local function createNpcESPObject(model)
        local esp = {
            Box = Drawing.new("Quad"),
            Name = Drawing.new("Text"),
            Distance = Drawing.new("Text")
        }
        
        -- è®¾ç½®åˆå§‹å±æ€§
        esp.Box.Thickness = 1.5
        esp.Box.Filled = false
        esp.Box.Color = Color3.fromRGB(255, 165, 0) -- æ©™è‰²
        
        esp.Name.Size = 16
        esp.Name.Center = true
        esp.Name.Outline = true
        esp.Name.Color = Color3.fromRGB(255, 165, 0)
        
        esp.Distance.Size = 14
        esp.Distance.Center = true
        esp.Distance.Outline = true
        esp.Distance.Color = Color3.fromRGB(255, 165, 0)
        
        npcEspCache[model] = esp
        return esp
    end
    
    -- æ›´æ–°NPC ESP
    local function updateNpcESP()
        if not npcEspEnabled then return end
        
        for _, model in ipairs(workspace:GetDescendants()) do
            if model:IsA("Model") and model:FindFirstChildOfClass("Humanoid") and not game.Players:GetPlayerFromCharacter(model) then
                local root = model:FindFirstChild("HumanoidRootPart") or model:FindFirstChild("Torso")
                local head = model:FindFirstChild("Head")
                
                if not (root and head) then
                    if npcEspCache[model] then
                        for _, obj in pairs(npcEspCache[model]) do
                            obj.Visible = false
                        end
                    end
                    continue
                end
                
                -- è·å–å±å¹•ä½ç½®
                local rootPos, rootVis = Camera:WorldToViewportPoint(root.Position)
                local headPos, headVis = Camera:WorldToViewportPoint(head.Position + Vector3.new(0, 1.5, 0))
                
                if not (rootVis and headVis) then
                    if npcEspCache[model] then
                        for _, obj in pairs(npcEspCache[model]) do
                            obj.Visible = false
                        end
                    end
                    continue
                end
                
                -- åˆ›å»ºæˆ–è·å–NPC ESPå¯¹è±¡
                local esp = npcEspCache[model] or createNpcESPObject(model)
                
                -- è®¡ç®—å°ºå¯¸
                local height = math.abs(headPos.Y - rootPos.Y) * 1.5
                local width = height * 0.6
                local left = headPos.X - width / 2
                local right = headPos.X + width / 2
                
                -- æ›´æ–°æ–¹æ¡†
                esp.Box.Visible = true
                esp.Box.PointA = Vector2.new(left, headPos.Y)
                esp.Box.PointB = Vector2.new(right, headPos.Y)
                esp.Box.PointC = Vector2.new(right, headPos.Y + height)
                esp.Box.PointD = Vector2.new(left, headPos.Y + height)
                
                -- æ›´æ–°åå­—
                esp.Name.Visible = true
                esp.Name.Position = Vector2.new(headPos.X, headPos.Y - 15)
                esp.Name.Text = model.Name
                
                -- æ›´æ–°è·ç¦»
                local distance = math.floor((root.Position - Camera.CFrame.Position).Magnitude)
                esp.Distance.Visible = true
                esp.Distance.Position = Vector2.new(headPos.X, headPos.Y + height + 5)
                esp.Distance.Text = tostring(distance) .. "m"
            end
        end
        
        -- æ¸…ç†ä¸å­˜åœ¨çš„NPC ESP
        for model, esp in pairs(npcEspCache) do
            if not model or not model.Parent then
                for _, obj in pairs(esp) do
                    obj.Visible = false
                    obj:Remove()
                end
                npcEspCache[model] = nil
            end
        end
    end
    
    -- å¯åŠ¨NPC ESPå¾ªç¯
    local npcEspLoop
    Tab4:AddToggle({Name = "å¢å¼ºNPCé€è§†", Default = false, Callback = function(v)
        npcEspEnabled = v
        if v then
            if not npcEspLoop then
                npcEspLoop = game:GetService("RunService").RenderStepped:Connect(updateNpcESP)
            end
        else
            if npcEspLoop then
                npcEspLoop:Disconnect()
                npcEspLoop = nil
            end
            -- æ¸…ç†ç¼“å­˜
            for model, esp in pairs(npcEspCache) do
                for _, obj in pairs(esp) do
                    pcall(function() obj:Remove() end)
                end
            end
            table.clear(npcEspCache)
        end
    end})
    
    -----------------------------------------------------------------
    -- â‘© ä¸‰é”å®šï¼šç§»é€Ÿ / è·³è·ƒ / é‡åŠ›
    -----------------------------------------------------------------
    local lockSpeed, lockJump, lockGrav = false, false, false
    local savedSpeed, savedJump, savedGrav = 16, 50, 196
    
    local function applyValues()
        local char = game.Players.LocalPlayer.Character or game.Players.LocalPlayer.CharacterAdded:Wait()
        local hum = char:WaitForChild("Humanoid", 3)
        if lockSpeed then hum.WalkSpeed = savedSpeed end
        if lockJump then hum.JumpPower = savedJump end
        if lockGrav then workspace.Gravity = savedGrav end
    end
    game.Players.LocalPlayer.CharacterAdded:Connect(function()
        task.wait(.1)
        applyValues()
    end)
    
    -- è¾“å…¥æ¡† + å¼€å…³
    local lockSec = Tab4:AddSection({Name = "ä¸‰é”å®š"})
    lockSec:AddTextbox({Name = "è®¾å®šç§»é€Ÿï¼ˆä»…ä¿å­˜å€¼ï¼‰", Default = tostring(savedSpeed), Callback = function(txt) savedSpeed = tonumber(txt) or 16 end})
    lockSec:AddTextbox({Name = "è®¾å®šè·³è·ƒé«˜åº¦ï¼ˆä»…ä¿å­˜å€¼ï¼‰", Default = tostring(savedJump), Callback = function(txt) savedJump = tonumber(txt) or 50 end})
    lockSec:AddTextbox({Name = "è®¾å®šé‡åŠ›å€¼ï¼ˆä»…ä¿å­˜å€¼ï¼‰", Default = tostring(savedGrav), Callback = function(txt) savedGrav = tonumber(txt) or 196 end})
    
    lockSec:AddToggle({Name = "é”å®šç§»é€Ÿ", Default = false, Callback = function(v) lockSpeed = v; applyValues() end})
    lockSec:AddToggle({Name = "é”å®šè·³è·ƒ", Default = false, Callback = function(v) lockJump = v; applyValues() end})
    lockSec:AddToggle({Name = "é”å®šé‡åŠ›", Default = false, Callback = function(v) lockGrav = v; applyValues() end})
    
    
    --æ§åˆ¶å° Tap
    local Tab2 = Window:MakeTab({Name = "æ§åˆ¶å°", Icon = "rbxassetid://7733779610"})
    Tab2:AddButton({Name = "æ§åˆ¶å°", Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/HfCtLtt9"))()
    end})
    
    -- XAè„šæœ¬ Tab
    local Tab3 = Window:MakeTab({Name = "XAè„šæœ¬", Icon = "rbxassetid://7733779610"})
    Tab3:AddButton({Name = "XA HUB", Callback = function()
        loadstring(game:HttpGet("https://xingtaiduan.pythonanywhere.com/Loader"))()
    end})
    
    --RBè„šæœ¬ä¸­å¿ƒ Tap
    local Tab4 = Window:MakeTab({Name = "RBè„šæœ¬", Icon = "rbxassetid://7733779610"})
    Tab4:AddButton({Name = "Rbè„šæœ¬", Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Yungengxin/roblox/refs/heads/main/Rb-Hub"))()
    end})
    
    -- ç”Ÿå­˜ä¸æ€æ‰‹ Tab
    local Tab5 = Window:MakeTab({Name = "ç”Ÿå­˜ä¸æ€æ‰‹", Icon = "rbxassetid://7733779610"})
    Tab5:AddButton({Name = "ç”Ÿå­˜ä¸æ€æ‰‹", Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Milan08Studio/ChairWare/main/main.lua"))()
    end})
    
    --çˆ±å¾·å
    local Tab6 = Window:MakeTab({Name = "çˆ±å¾·å", Icon = "rbxassetid://7733779610"})
    Tab6:AddButton({Name = "çˆ±å¾·å", Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/gumanba/Scripts/main/Edward"))()
    end})
    
    --æ´»äº†7å¤©
    local Tab7 = Window:MakeTab({Name = "æ´»äº†7å¤©", Icon = "rbxassetid://7733779610"})
    Tab7:AddButton({Name = "æ´»äº†7å¤©", Callback = function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-7-days-to-live-36824"))()
    end})
    
    --æ­»é“è½¨
    local Tab8 = Window:MakeTab({Name = "æ­»é“è½¨", Icon = "rbxassetid://7733779610"})
    Tab8:AddButton({Name = "æ­»é“è½¨", Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/iopjklbnmsss/SansHubScript/refs/heads/main/SansHub"))()
    end})
    
    -- å¯åŠ¨
    OrionLib:Init()
end)()  -- æ·»åŠ å³æ‹¬å·å’Œè°ƒç”¨æ‹¬å·
