(function()
    -- 卡密系统
    local validKeys = {
        "913348285",  -- 示例卡密
        "KUNKUN666",
        "DAIDI888"
    }
    
    local keyVerified = false
    
    -- 卡密验证函数
    local function verifyKey(inputKey)
        for _, key in ipairs(validKeys) do
            if inputKey == key then
                return true
            end
        end
        return false
    end
    
    -- 创建卡密验证界面
    local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/wsomoQaz/lua-/main/Xcccc"))()
    
    local AuthWindow = OrionLib:MakeWindow({
        Name = "卡密验证",
        HidePremium = true,
        SaveConfig = false,
        IntroEnabled = false
    })
    
    AuthWindow:AddLabel("请输入卡密")
    local keyInput = AuthWindow:AddTextbox({
        Name = "卡密",
        Default = "",
        TextDisappear = true,
        Callback = function(text) end
    })
    
    AuthWindow:AddButton({
        Name = "验证",
        Callback = function()
            if verifyKey(keyInput.Value) then
                keyVerified = true
                AuthWindow:Destroy()
                OrionLib:MakeNotification({
                    Name = "验证成功",
                    Content = "卡密验证通过，欢迎使用！",
                    Time = 5
                })
                main()  -- 启动主脚本
            else
                OrionLib:MakeNotification({
                    Name = "错误",
                    Content = "无效的卡密，请重新输入！",
                    Time = 5
                })
            end
        end
    })
    
    -- 初始化验证窗口
    OrionLib:Init()
    
    -- 主脚本函数
    function main()
        if not keyVerified then return end
        
        getgenv().WindowSize = UDim2.new(0, 200, 0, 200)
        
        -- 纯黑主题
        OrionLib.Themes.Default = {
            Main    = Color3.fromRGB(20,20,20),
            Second  = Color3.fromRGB(30,30,30),
            Stroke  = Color3.fromRGB(50,50,50),
            Divider = Color3.fromRGB(40,40,40),
            Text    = Color3.fromRGB(255,255,255),
            TextDark= Color3.fromRGB(200,200,200)
        }
        OrionLib.SelectedTheme = "Default"
        
        -- 主窗口
        local Window = OrionLib:MakeWindow({
            IntroText = "坤坤大帝脚本",
            Name = "坤坤大帝脚本 - " .. identifyexecutor(),
            HidePremium = false,
            SaveConfig = true,
            ConfigFolder = "StitchConfig"
        })
        
        -- 公告 Tab
        local Tab1 = Window:MakeTab({Name = "公告", Icon = "rbxassetid://7733779610"})
        local function getDate() return os.date("%Y-%m-%d %H:%M") end
        local function getPlayer()
            local p = game.Players.LocalPlayer
            return {
                ["用户名"]   = p.Name,
                ["显示名"]   = p.DisplayName,
                ["用户ID"]   = p.UserId,
                ["注册天数"] = p.AccountAge,
                ["当前游戏"] = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
            }
        end
        Tab1:AddLabel("📅 当前时间")
        Tab1:AddLabel(getDate())
        for k, v in pairs(getPlayer()) do
            Tab1:AddLabel(k .. "： " .. tostring(v))
        end
        Tab1:AddButton({Name = "打印 QQ号", Callback = function() print("913348285") end})
        
        -- 人物功能 Tab
        local Tab4 = Window:MakeTab({Name = "人物功能", Icon = "rbxassetid://7733779610"})
        
        -- 兼容 executor 没有 mouse1press / mouse1release
        local mouse1press  = mouse1press  or function()
            local vim = game:GetService("VirtualInputManager")
            vim:SendMouseButtonEvent(0,0,0,true,game,1)
        end
        local mouse1release = mouse1release or function()
            local vim = game:GetService("VirtualInputManager")
            vim:SendMouseButtonEvent(0,0,0,false,game,1)
        end
        
        -- 双独立 FOV 瞄准系统
        -- ... [原有双FOV瞄准系统代码保持不变] ...
        
        -- 删除阴影
        Tab4:AddToggle({
            Name = "删除阴影",
            Default = false,
            Callback = function(v)
                game.Lighting.GlobalShadows = not v
                for _, l in ipairs(workspace:GetDescendants()) do
                    if l:IsA("BasePart") or l:IsA("MeshPart") then
                        l.CastShadow = not v
                    end
                end
                OrionLib:MakeNotification({Name = "提示", Content = v and "阴影已删除" or "阴影已恢复", Time = 2})
            end
        })
        
        -- 飞行功能
        -- ... [原有飞行功能代码保持不变] ...
        
        -- 玩家 ESP
        -- ... [原有玩家ESP代码保持不变] ...
        
        -- NPC 透视
        -- ... [原有NPC透视代码保持不变] ...
        
        -- 三锁定系统
        -- ... [原有三锁定系统代码保持不变] ...
        
        -- 控制台 Tab
        local Tab2 = Window:MakeTab({Name = "控制台", Icon = "rbxassetid://7733779610"})
        Tab2:AddButton({Name = "控制台", Callback = function()
            loadstring(game:HttpGet("https://pastebin.com/raw/HfCtLtt9"))()
        end})
        
        -- XA脚本 Tab
        local Tab3 = Window:MakeTab({Name = "XA脚本", Icon = "rbxassetid://7733779610"})
        Tab3:AddButton({Name = "XA HUB", Callback = function()
            loadstring(game:HttpGet("https://xingtaiduan.pythonanywhere.com/Loader"))()
        end})
        
        -- RB脚本 Tab
        local Tab4 = Window:MakeTab({Name = "RB脚本", Icon = "rbxassetid://7733779610"})
        Tab4:AddButton({Name = "Rb脚本", Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Yungengxin/roblox/refs/heads/main/Rb-Hub"))()
        end})
        
        -- 生存与杀手 Tab
        local Tab5 = Window:MakeTab({Name = "生存与杀手", Icon = "rbxassetid://7733779610"})
        Tab5:AddButton({Name = "生存与杀手", Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Milan08Studio/ChairWare/main/main.lua"))()
        end})
        
        -- 爱德华 Tab
        local Tab6 = Window:MakeTab({Name = "爱德华", Icon = "rbxassetid://7733779610"})
        Tab6:AddButton({Name = "爱德华", Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/gumanba/Scripts/main/Edward"))()
        end})
        
        -- 活了7天 Tab
        local Tab7 = Window:MakeTab({Name = "活了7天", Icon = "rbxassetid://7733779610"})
        Tab7:AddButton({Name = "活了7天", Callback = function()
            loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-7-days-to-live-36824"))()
        end})
        
        -- 死铁轨 Tab
        local Tab8 = Window:MakeTab({Name = "死铁轨", Icon = "rbxassetid://7733779610"})
        Tab8:AddButton({Name = "死铁轨", Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/iopjklbnmsss/SansHubScript/refs/heads/main/SansHub"))()
        end})
        
        -- 初始化主界面
        OrionLib:Init()
    end
end)()
