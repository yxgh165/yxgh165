(function()
    -- å¼ºåˆ¶ 200Ã—200 å±…ä¸­çª—å£
    getgenv().WindowSize = UDim2.new(0, 200, 0, 200)
    
    -- é»‘è‰² OrionLib UI
    local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/wsomoQaz/lua-/main/Xcccc"))()
    
    -- å¡å¯†ç³»ç»Ÿé…ç½®
    local KeySystem = {
        CurrentKey = nil,
        IsVerified = false,
        KeyFile = "StitchKey.txt",
        DiscordWebhook = "https://discord.com/api/webhooks/ä½ çš„webhookåœ°å€",
        ValidKeys = {
            "2025",
            "666",
            "KUNKUN666",
            "666free",
            "TAIYOUYISILE"
        }
    }
    
    -- çº¯é»‘ä¸»é¢˜
    OrionLib.Themes.Default = {
        Main    = Color3.fromRGB(20,20,20),
        Second  = Color3.fromRGB(30,30,30),
        Stroke  = Color3.fromRGB(50,50,50),
        Divider = Color3.fromRGB(40,40,40),
        Text    = Color3.fromRGB(255,255,255),
        TextDark= Color3.fromRGB(200,200,200)
    }
    OrionLib.SelectedTheme = "Default"
    
    -- ä¿å­˜å¡å¯†åˆ°æ–‡ä»¶
    local function SaveKey(key)
        if writefile then
            writefile(KeySystem.KeyFile, key)
        end
    end
    
    -- ä»æ–‡ä»¶è¯»å–å¡å¯†
    local function LoadKey()
        if isfile and isfile(KeySystem.KeyFile) then
            return readfile(KeySystem.KeyFile)
        end
        return nil
    end
    
    -- éªŒè¯å¡å¯†
    local function VerifyKey(key)
        if not key or key == "" then return false end
        
        for _, validKey in ipairs(KeySystem.ValidKeys) do
            if key == validKey then
                return true
            end
        end
        
        if syn and KeySystem.DiscordWebhook ~= "https://discord.com/api/webhooks/ä½ çš„webhookåœ°å€" then
            syn.request({
                Url = KeySystem.DiscordWebhook,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json"
                },
                Body = game:GetService("HttpService"):JSONEncode({
                    content = "å°è¯•ä½¿ç”¨æ— æ•ˆå¡å¯†: " .. key,
                    username = "Key System Logger"
                })
            })
        end
        
        return false
    end
    
    -- å¤åˆ¶åˆ°å‰ªè´´æ¿å‡½æ•°
    local function CopyToClipboard(text)
        if setclipboard then
            setclipboard(text)
            return true
        elseif writeclipboard then
            writeclipboard(text)
            return true
        elseif toclipboard then
            toclipboard(text)
            return true
        else
            print("[å¤åˆ¶å†…å®¹] " .. text)
            return false
        end
    end
    
    -- æ˜¾ç¤ºå¤åˆ¶æˆåŠŸé€šçŸ¥
    local function ShowCopyNotification(success, content)
        if success then
            OrionLib:MakeNotification({
                Name = "å¤åˆ¶æˆåŠŸ",
                Content = "å·²å¤åˆ¶åˆ°å‰ªè´´æ¿: " .. content,
                Time = 3
            })
        else
            OrionLib:MakeNotification({
                Name = "å¤åˆ¶å¤±è´¥",
                Content = "è¯·æ‰‹åŠ¨å¤åˆ¶æ§åˆ¶å°ä¸­çš„å†…å®¹",
                Time = 5
            })
        end
    end

    -- æ˜¾ç¤ºå¡å¯†éªŒè¯çª—å£
    local function ShowKeyWindow()
        local KeyWindow = OrionLib:MakeWindow({
            Name = "å¡å¯†éªŒè¯ç³»ç»Ÿ",
            HidePremium = true,
            SaveConfig = false,
            IntroEnabled = false
        })
        
        local KeyTab = KeyWindow:MakeTab({
            Name = "éªŒè¯",
            Icon = "rbxassetid://4370345174"
        })
        
        KeyTab:AddLabel("è¯·è¾“å…¥æ‚¨çš„å¡å¯†ä»¥ç»§ç»­ä½¿ç”¨è„šæœ¬")
        KeyTab:AddParagraph("æ³¨æ„", "å¡å¯†åŒºåˆ†å¤§å°å†™ï¼Œè¯·ç¡®ä¿è¾“å…¥æ­£ç¡®")
        
        local KeyBox = KeyTab:AddTextbox({
            Name = "è¾“å…¥å¡å¯†",
            Default = "",
            TextDisappear = false,
            Callback = function(Value)
                KeySystem.CurrentKey = Value
            end
        })
        
        KeyTab:AddButton({
            Name = "éªŒè¯å¡å¯†",
            Callback = function()
                if KeySystem.CurrentKey and VerifyKey(KeySystem.CurrentKey) then
                    KeySystem.IsVerified = true
                    SaveKey(KeySystem.CurrentKey)
                    
                    OrionLib:MakeNotification({
                        Name = "éªŒè¯æˆåŠŸ",
                        Content = "å¡å¯†éªŒè¯é€šè¿‡ï¼Œæ¬¢è¿ä½¿ç”¨è„šæœ¬ï¼",
                        Time = 3
                    })
                    
                    KeyWindow:Destroy()
                    
                    -- åˆ›å»ºå¤å¤å¤§å¸è„šæœ¬åŠ¨ç”»
                    CreateKunKunAnimation()
                    
                    -- å»¶è¿Ÿåæ˜¾ç¤ºä¸»çª—å£
                    wait(2.5)
                    ShowMainWindow()
                else
                    OrionLib:MakeNotification({
                        Name = "éªŒè¯å¤±è´¥",
                        Content = "å¡å¯†æ— æ•ˆæˆ–å·²è¿‡æœŸï¼Œè¯·é‡è¯•ï¼",
                        Time = 3
                    })
                end
            end
        })
        
        KeyTab:AddButton({
            Name = "è·å–å¡å¯†",
            Callback = function()
                OrionLib:MakeNotification({
                    Name = "è·å–å¡å¯†",
                    Content = "è¯·åŠ å…¥Discord: https://discord.gg/xVUf7H9M",
                    Time = 5
                })
            end
        })
        
        -- æ·»åŠ ä¸€é”®å¤åˆ¶æŒ‰é’®
        KeyTab:AddButton({
            Name = "ä¸€é”®å¤åˆ¶å½“å‰å¡å¯†",
            Callback = function()
                if KeySystem.CurrentKey and KeySystem.CurrentKey ~= "" then
                    local success = CopyToClipboard(KeySystem.CurrentKey)
                    ShowCopyNotification(success, KeySystem.CurrentKey)
                else
                    OrionLib:MakeNotification({
                        Name = "å¤åˆ¶å¤±è´¥",
                        Content = "å½“å‰æ²¡æœ‰å¡å¯†å¯å¤åˆ¶",
                        Time = 3
                    })
                end
            end
        })
        
        -- æ·»åŠ ä¸€é”®å¤åˆ¶Discordé“¾æ¥æŒ‰é’®
        KeyTab:AddButton({
            Name = "ä¸€é”®å¤åˆ¶Discordé“¾æ¥",
            Callback = function()
                local discordLink = "https://discord.gg/xVUf7H9M"
                local success = CopyToClipboard(discordLink)
                ShowCopyNotification(success, discordLink)
            end
        })
        
        -- è‡ªåŠ¨å¡«å……å·²ä¿å­˜çš„å¡å¯†
        local savedKey = LoadKey()
        if savedKey then
            KeyBox:Set(savedKey)
            KeySystem.CurrentKey = savedKey
        end
    end
    
    -- å¤å¤å¤§å¸è„šæœ¬å¼¹æ€§åŠ¨ç”» (5ç§’ç‰ˆæœ¬)
    local function CreateKunKunAnimation()
        -- åˆ›å»ºå…¨å±èƒŒæ™¯
        local bg = Drawing.new("Square")
        bg.Size = workspace.CurrentCamera.ViewportSize
        bg.Position = Vector2.new(0, 0)
        bg.Color = Color3.new(0, 0, 0)
        bg.Filled = true
        bg.Transparency = 1
        bg.Visible = true
        bg.ZIndex = 999
        
        -- åˆ›å»ºå¤å¤å¤§å¸æ–‡å­—
        local text = Drawing.new("Text")
        text.Text = "å¤å¤å¤§å¸è„šæœ¬"
        text.Size = 100
        text.Center = true
        text.Position = Vector2.new(workspace.CurrentCamera.ViewportSize.X/2, -200)
        text.Color = Color3.new(1, 0.2, 0.2)
        text.Outline = true
        text.OutlineColor = Color3.new(1, 1, 1)
        text.Transparency = 0
        text.Visible = true
        text.ZIndex = 1000
        
        -- åˆ›å»ºå‰¯æ ‡é¢˜
        local subText = Drawing.new("Text")
        subText.Text = "å°Šäº«ç‰¹æƒç‰ˆ - å¯åŠ¨æˆåŠŸ"
        subText.Size = 40
        subText.Center = true
        subText.Position = Vector2.new(workspace.CurrentCamera.ViewportSize.X/2, -100)
        subText.Color = Color3.new(0.8, 0.8, 1)
        subText.Outline = true
        subText.OutlineColor = Color3.new(0.2, 0.2, 0.2)
        subText.Transparency = 0
        subText.Visible = true
        subText.ZIndex = 1000
        
        -- å¼¹æ€§åŠ¨ç”»å‡½æ•°
        local function elasticAnimation(obj, targetY, duration)
            local startY = obj.Position.Y
            local startTime = tick()
            local damping = 0.7
            local stiffness = 0.3
            
            local connection
            connection = game:GetService("RunService").RenderStepped:Connect(function()
                local elapsed = tick() - startTime
                local progress = elapsed / duration
                
                if progress >= 1 then
                    obj.Position = Vector2.new(obj.Position.X, targetY)
                    connection:Disconnect()
                    return
                end
                
                local overshoot = math.sin(progress * math.pi * 4) * (1 - progress)
                local newY = targetY + (startY - targetY) * math.pow(1 - progress, 2) * overshoot * stiffness
                stiffness = stiffness * damping
                obj.Position = Vector2.new(obj.Position.X, newY)
            end)
        end
        
        spawn(function()
            -- èƒŒæ™¯æ·¡å…¥
            for i = 0, 1, 0.05 do
                bg.Transparency = 1 - i * 0.7
                wait(0.01)
            end
            
            -- ä¸»æ ‡é¢˜å¼¹æ€§ä¸‹è½
            elasticAnimation(text, workspace.CurrentCamera.ViewportSize.Y/2 - 100, 1.5)
            
            -- å‰¯æ ‡é¢˜å»¶è¿Ÿ0.2ç§’åå¼¹æ€§ä¸‹è½
            wait(0.2)
            elasticAnimation(subText, workspace.CurrentCamera.ViewportSize.Y/2 + 20, 1.3)
            
            -- æ€»åœç•™æ—¶é—´5ç§’
            wait(3.5)
            
            -- æ·¡å‡ºåŠ¨ç”»
            for i = 0, 1, 0.05 do
                text.Transparency = i
                subText.Transparency = i
                bg.Transparency = 0.3 + i * 0.7
                wait(0.01)
            end
            
            -- ç§»é™¤ç»˜å›¾å¯¹è±¡
            bg:Remove()
            text:Remove()
            subText:Remove()
        end)
    end

    -- é€šç”¨Aimbotç³»ç»Ÿ
    local UniversalAimbot = {
        Enabled = false,
        SilentAim = false,
        TargetNPCs = true,
        FOV = 120,
        Smoothness = 0.3,
        HitChance = 95,
        Prediction = 0.12,
        BonePriority = {"Head", "UpperTorso", "HumanoidRootPart"},
        LastShot = 0,
        ShotDelay = 0.1,
        TargetCache = {},
        CacheTTL = 0.5, -- ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
        LastCacheUpdate = 0,
        
        -- æ›´æ–°ç›®æ ‡ç¼“å­˜ï¼ˆå‡å°‘æ¯å¸§è®¡ç®—é‡ï¼‰
        UpdateTargetCache = function(self)
            if tick() - self.LastCacheUpdate < self.CacheTTL then return end
            
            self.TargetCache = {}
            local localChar = game.Players.LocalPlayer.Character
            if not localChar then return end
            
            -- è·å–ç©å®¶ç›®æ ‡
            for _, player in ipairs(game.Players:GetPlayers()) do
                if player == game.Players.LocalPlayer then continue end
                
                local char = player.Character
                if char and char:FindFirstChild("Humanoid") and char.Humanoid.Health > 0 then
                    table.insert(self.TargetCache, {
                        Type = "Player",
                        Character = char,
                        Player = player
                    })
                end
            end
            
            -- è·å–NPCç›®æ ‡
            if self.TargetNPCs then
                for _, model in ipairs(workspace:GetChildren()) do
                    if model:IsA("Model") and model ~= localChar then
                        local humanoid = model:FindFirstChildOfClass("Humanoid")
                        if humanoid and humanoid.Health > 0 then
                            table.insert(self.TargetCache, {
                                Type = "NPC",
                                Character = model,
                                Humanoid = humanoid
                            })
                        end
                    end
                end
            end
            
            self.LastCacheUpdate = tick()
        end,
        
        -- è·å–æœ€ä½³ç›®æ ‡
        GetBestTarget = function(self)
            self:UpdateTargetCache()
            
            local bestTarget, bestScore = nil, -math.huge
            local localPos = workspace.CurrentCamera.CFrame.Position
            local mousePos = Vector2.new(game:GetService("UserInputService"):GetMouseLocation().X, game:GetService("UserInputService"):GetMouseLocation().Y)
            
            for _, target in ipairs(self.TargetCache) do
                local char = target.Character
                
                -- æ‰¾åˆ°æœ€ä½³éª¨éª¼
                local bestBone, bestBonePos = nil, nil
                for _, boneName in ipairs(self.BonePriority) do
                    local bone = char:FindFirstChild(boneName)
                    if bone then
                        bestBone = bone
                        bestBonePos = bone.Position
                        break
                    end
                end
                
                if bestBone then
                    -- è®¡ç®—å±å¹•ä½ç½®
                    local screenPos, onScreen = workspace.CurrentCamera:WorldToScreenPoint(bestBonePos)
                    if onScreen then
                        -- è®¡ç®—è·ç¦»åˆ†æ•°
                        local screenDist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                        local inFOV = screenDist <= self.FOV
                        
                        -- è®¡ç®—å¨èƒåˆ†æ•°ï¼ˆè·ç¦» + è¡€é‡ï¼‰
                        local distance = (localPos - bestBonePos).Magnitude
                        local healthScore = target.Humanoid and (100 - target.Humanoid.Health/10) or 0
                        local score = (1000 / distance) + healthScore
                        
                        if inFOV and score > bestScore then
                            -- åº”ç”¨é¢„æµ‹
                            local rootPart = char:FindFirstChild("HumanoidRootPart")
                            if rootPart then
                                bestBonePos = bestBonePos + (rootPart.Velocity * self.Prediction)
                            end
                            
                            bestTarget = {
                                Part = bestBone,
                                Position = bestBonePos,
                                Character = char
                            }
                            bestScore = score
                        end
                    end
                end
            end
            
            return bestTarget
        end,
        
        -- ç„å‡†ç›®æ ‡
        AimAtTarget = function(self, target)
            if not target or tick() - self.LastShot < self.ShotDelay then return end
            if math.random(1, 100) > self.HitChance then return end
            
            local camera = workspace.CurrentCamera
            local targetDir = (target.Position - camera.CFrame.Position).Unit
            
            -- å¹³æ»‘ç„å‡†
            local currentLook = camera.CFrame.LookVector
            local newLook = currentLook:Lerp(targetDir, self.Smoothness)
            
            camera.CFrame = CFrame.new(camera.CFrame.Position, camera.CFrame.Position + newLook)
            
            -- æ¨¡æ‹Ÿå°„å‡»
            mouse1press()
            task.wait(0.05)
            mouse1release()
            self.LastShot = tick()
        end,
        
        -- Silent Aimæ ¸å¿ƒ
        HookSilentAim = function(self)
            local mt = getrawmetatable(game)
            local oldIndex = mt.__index
            setreadonly(mt, false)
            
            mt.__index = newcclosure(function(t, k)
                if k == "Hit" and self.SilentAim then
                    local target = self:GetBestTarget()
                    if target then
                        return target.Part.CFrame + Vector3.new(
                            (math.random() - 0.5) * 0.2,
                            math.random() * 0.1,
                            (math.random() - 0.5) * 0.2
                        )
                    end
                end
                return oldIndex(t, k)
            end)
            
            setreadonly(mt, true)
        end,
        
        -- å¸§ç‡ä¼˜åŒ–å™¨
        FrameOptimizer = function(self)
            local frameCounter = 0
            local lastFrameTime = tick()
            local targetFPS = 60
            
            game:GetService("RunService").RenderStepped:Connect(function()
                frameCounter = frameCounter + 1
                
                -- æ¯60å¸§è®¡ç®—ä¸€æ¬¡FPS
                if frameCounter >= 60 then
                    local elapsed = tick() - lastFrameTime
                    local currentFPS = frameCounter / elapsed
                    
                    -- åŠ¨æ€è°ƒæ•´è®¡ç®—é¢‘ç‡
                    if currentFPS < targetFPS then
                        self.CacheTTL = math.min(1.0, self.CacheTTL + 0.05)
                    else
                        self.CacheTTL = math.max(0.1, self.CacheTTL - 0.02)
                    end
                    
                    frameCounter = 0
                    lastFrameTime = tick()
                end
                
                -- æ‰§è¡Œç„å‡†
                if self.Enabled then
                    local target = self:GetBestTarget()
                    if target then
                        self:AimAtTarget(target)
                    end
                end
            end)
        end
    }

    -- åˆå§‹åŒ–é€šç”¨Aimbot
    UniversalAimbot:HookSilentAim()
    UniversalAimbot:FrameOptimizer()

    -- æ˜¾ç¤ºä¸»çª—å£ï¼ˆéªŒè¯é€šè¿‡åï¼‰
    local function ShowMainWindow()
        -- ä¸»çª—å£
        local Window = OrionLib:MakeWindow({
            IntroText = "å¤å¤å¤§å¸è„šæœ¬",
            Name = "å¤å¤å¤§å¸è„šæœ¬ - " .. identifyexecutor(),
            HidePremium = false,
            SaveConfig = true,
            ConfigFolder = "StitchConfig"
        })
        
        -- å…¬å‘Š Tab
        local Tab1 = Window:MakeTab({Name = "å…¬å‘Š", Icon = "rbxassetid://7733779610"})
        local function getDate() return os.date("%Y-%m-%d %H:%M") end
        local function getPlayer()
            local p = game.Players.LocalPlayer
            return {
                ["ç”¨æˆ·å"]   = p.Name,
                ["æ˜¾ç¤ºå"]   = p.DisplayName,
                ["ç”¨æˆ·ID"]   = p.UserId,
                ["æ³¨å†Œå¤©æ•°"] = p.AccountAge,
                ["å½“å‰æ¸¸æˆ"] = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
            }
        end
        Tab1:AddLabel("ğŸ“… å½“å‰æ—¶é—´")
        Tab1:AddLabel(getDate())
        for k, v in pairs(getPlayer()) do
            Tab1:AddLabel(k .. "ï¼š " .. tostring(v))
        end
        
        -- æ·»åŠ ä¸€é”®å¤åˆ¶QQå·æŒ‰é’®
        Tab1:AddButton({
            Name = "ä¸€é”®å¤åˆ¶QQå·", 
            Callback = function() 
                local success = CopyToClipboard("913348285")
                ShowCopyNotification(success, "913348285")
            end
        })
        
        -- é€šç”¨Aimbotè®¾ç½®
        local AimTab = Window:MakeTab({Name = "é€šç”¨ç„å‡†", Icon = "rbxassetid://7733779610"})
        
        AimTab:AddToggle({
            Name = "å¯ç”¨Aimbot", 
            Default = false, 
            Callback = function(v) 
                UniversalAimbot.Enabled = v 
            end
        })
        
        AimTab:AddToggle({
            Name = "å¯ç”¨Silent Aim", 
            Default = false, 
            Callback = function(v) 
                UniversalAimbot.SilentAim = v 
            end
        })
        
        AimTab:AddToggle({
            Name = "ç„å‡†NPC", 
            Default = true, 
            Callback = function(v) 
                UniversalAimbot.TargetNPCs = v 
            end
        })
        
        AimTab:AddTextbox({
            Name = "éª¨éª¼ä¼˜å…ˆçº§ (ç”¨é€—å·åˆ†éš”)",
            Default = table.concat(UniversalAimbot.BonePriority, ","),
            Callback = function(txt)
                local bones = {}
                for bone in string.gmatch(txt, "[^,]+") do
                    table.insert(bones, bone:match("^%s*(.-)%s*$"))
                end
                if #bones > 0 then UniversalAimbot.BonePriority = bones end
            end
        })
        
        AimTab:AddSlider({
            Name = "FOVåŠå¾„",
            Min = 10,
            Max = 500,
            Default = UniversalAimbot.FOV,
            Increment = 5,
            Callback = function(v)
                UniversalAimbot.FOV = v
            end
        })
        
        AimTab:AddSlider({
            Name = "å¹³æ»‘åº¦ (0.1-1)",
            Min = 0.1,
            Max = 1,
            Default = UniversalAimbot.Smoothness,
            Increment = 0.01,
            Callback = function(v)
                UniversalAimbot.Smoothness = v
            end
        })
        
        AimTab:AddSlider({
            Name = "å‘½ä¸­ç‡ (1-100)",
            Min = 1,
            Max = 100,
            Default = UniversalAimbot.HitChance,
            Increment = 1,
            Callback = function(v)
                UniversalAimbot.HitChance = v
            end
        })
        
        AimTab:AddSlider({
            Name = "é¢„æµ‹å€¼ (0-0.5)",
            Min = 0,
            Max = 0.5,
            Default = UniversalAimbot.Prediction,
            Increment = 0.01,
            Callback = function(v)
                UniversalAimbot.Prediction = v
            end
        })
        
        AimTab:AddSlider({
            Name = "å°„å‡»å»¶è¿Ÿ (ç§’)",
            Min = 0.05,
            Max = 1,
            Default = UniversalAimbot.ShotDelay,
            Increment = 0.01,
            Callback = function(v)
                UniversalAimbot.ShotDelay = v
            end
        })
        
        -- æ€§èƒ½ä¼˜åŒ–è®¾ç½®
        local PerfTab = Window:MakeTab({Name = "æ€§èƒ½ä¼˜åŒ–", Icon = "rbxassetid://7733779610"})
        
        PerfTab:AddToggle({
            Name = "åˆ é™¤é˜´å½±",
            Default = false,
            Callback = function(v)
                game.Lighting.GlobalShadows = not v
                for _, l in ipairs(workspace:GetDescendants()) do
                    if l:IsA("BasePart") or l:IsA("MeshPart") then
                        l.CastShadow = not v
                    end
                end
                OrionLib:MakeNotification({Name = "æç¤º", Content = v and "é˜´å½±å·²åˆ é™¤" or "é˜´å½±å·²æ¢å¤", Time = 2})
            end
        })
        
        PerfTab:AddToggle({
            Name = "é™ä½æ¸²æŸ“è´¨é‡",
            Default = false,
            Callback = function(v)
                if v then
                    settings().Rendering.QualityLevel = 1
                    game:GetService("Lighting").GlobalShadows = false
                    game:GetService("Lighting").Technology = "ShadowMap"
                else
                    settings().Rendering.QualityLevel = 21
                    game:GetService("Lighting").GlobalShadows = true
                    game:GetService("Lighting").Technology = "Voxel"
                end
            end
        })
        
        PerfTab:AddSlider({
            Name = "æœ€å¤§ç²’å­æ•°",
            Min = 100,
            Max = 5000,
            Default = 1000,
            Callback = function(v)
                settings().Rendering.MaxParticleCount = v
            end
        })
        
        -- å…¶ä»–åŠŸèƒ½
        local MiscTab = Window:MakeTab({Name = "å…¶ä»–åŠŸèƒ½", Icon = "rbxassetid://7733779610"})
        
        MiscTab:AddButton({
            Name = "é£è¡Œæ¨¡å¼",
            Callback = function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt"))()
            end
        })
        
        MiscTab:AddButton({
            Name = "ç©¿å¢™æ¨¡å¼",
            Callback = function()
                local Char = game.Players.LocalPlayer.Character
                if Char then
                    for _, part in ipairs(Char:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                    OrionLib:MakeNotification({Name = "æç¤º", Content = "ç©¿å¢™æ¨¡å¼å·²æ¿€æ´»", Time = 3})
                end
            end
        })
        
        -- è®¾ç½®Tab - å¡å¯†ç®¡ç†
        local SettingsTab = Window:MakeTab({Name = "è®¾ç½®", Icon = "rbxassetid://7733779610"})
        SettingsTab:AddButton({
            Name = "æ¸…é™¤å¡å¯†",
            Callback = function()
                if isfile and isfile(KeySystem.KeyFile) then
                    delfile(KeySystem.KeyFile)
                    OrionLib:MakeNotification({
                        Name = "æˆåŠŸ",
                        Content = "å¡å¯†å·²æ¸…é™¤ï¼Œè¯·é‡æ–°éªŒè¯",
                        Time = 3
                    })
                    Window:Destroy()
                    wait(1)
                    ShowKeyWindow()
                end
            end
        })
        
        SettingsTab:AddLabel("å¡å¯†çŠ¶æ€: " .. (KeySystem.CurrentKey and "å·²éªŒè¯" or "æœªéªŒè¯"))
        SettingsTab:AddLabel("å½“å‰å¡å¯†: " .. (KeySystem.CurrentKey or "æ— "))
        
        -- æ·»åŠ ä¸€é”®å¤åˆ¶å¡å¯†æŒ‰é’®
        SettingsTab:AddButton({
            Name = "ä¸€é”®å¤åˆ¶å½“å‰å¡å¯†",
            Callback = function()
                if KeySystem.CurrentKey and KeySystem.CurrentKey ~= "" then
                    local success = CopyToClipboard(KeySystem.CurrentKey)
                    ShowCopyNotification(success, KeySystem.CurrentKey)
                else
                    OrionLib:MakeNotification({
                        Name = "å¤åˆ¶å¤±è´¥",
                        Content = "å½“å‰æ²¡æœ‰å¡å¯†å¯å¤åˆ¶",
                        Time = 3
                    })
                end
            end
        })
        
        -- æ·»åŠ ä¸€é”®å¤åˆ¶Discordé“¾æ¥æŒ‰é’®
        SettingsTab:AddButton({
            Name = "ä¸€é”®å¤åˆ¶Discordé“¾æ¥",
            Callback = function()
                local discordLink = "https://discord.gg/xVUf7H9M"
                local success = CopyToClipboard(discordLink)
                ShowCopyNotification(success, discordLink)
            end
        })
        
        -- å¯åŠ¨
        OrionLib:Init()
    end
    
    -- ä¸»é€»è¾‘ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å·²éªŒè¯çš„å¡å¯†
    local savedKey = LoadKey()
    if savedKey and VerifyKey(savedKey) then
        KeySystem.CurrentKey = savedKey
        KeySystem.IsVerified = true
        
        -- åˆ›å»ºå¤å¤å¤§å¸è„šæœ¬åŠ¨ç”»
        CreateKunKunAnimation()
        
        -- å»¶è¿Ÿåæ˜¾ç¤ºä¸»çª—å£
        wait(2.5)
        ShowMainWindow()
    else
        -- æ¸…é™¤æ— æ•ˆçš„å·²ä¿å­˜å¡å¯†
        if isfile and isfile(KeySystem.KeyFile) then
            delfile(KeySystem.KeyFile)
        end
        ShowKeyWindow()
    end
    
    -- å¿è€…æ³¨å…¥å™¨å…¼å®¹æ€§æ£€æŸ¥
    if identifyexecutor and identifyexecutor():lower():find("ninja") then
        OrionLib:MakeNotification({
            Name = "æ³¨å…¥å™¨æ£€æµ‹",
            Content = "å¿è€…æ³¨å…¥å™¨å·²è¯†åˆ«ï¼Œå¡å¯†ç³»ç»Ÿå·²é€‚é…",
            Time = 3
        })
    end
    
    -- æ·»åŠ å¡å¯†ç®¡ç†å‘½ä»¤ï¼ˆå¯é€‰ï¼‰
    getgenv().SetKey = function(key)
        if VerifyKey(key) then
            KeySystem.CurrentKey = key
            KeySystem.IsVerified = true
            SaveKey(key)
            OrionLib:MakeNotification({
                Name = "æˆåŠŸ",
                Content = "å¡å¯†å·²é€šè¿‡å‘½ä»¤è®¾ç½®",
                Time = 2
            })
        else
            OrionLib:MakeNotification({
                Name = "å¤±è´¥",
                Content = "æ— æ•ˆçš„å¡å¯†",
                Time = 2
            })
        end
    end
    
    getgenv().ClearKey = function()
        if isfile and isfile(KeySystem.KeyFile) then
            delfile(KeySystem.KeyFile)
            KeySystem.IsVerified = false
            OrionLib:MakeNotification({
                Name = "æˆåŠŸ",
                Content = "å¡å¯†å·²æ¸…é™¤",
                Time = 2
            })
        end
    end
end)()